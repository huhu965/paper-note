# **论文名称**
    LOAM: Lidar Odometry and Mapping in Real-time
### 作者和是否开源代码
    Ji Zhang and Sanjiv Singh
    代码开源 A-loam
### 发表年份
    2014


## **摘要**
##### 做了什么改变世界的工作
&emsp;&emsp;提出了一种使用2轴激光雷达在6自由度移动距离测量的实时里程计和建图方法。
##### 怎么做的
&emsp;&emsp;通过一个高频率的低精度雷达里程计做ScanToScan，然后估计两scan之间的大致位姿，然后一个低频率的建图里程计，用来匹配出整个sweep和map的位姿，获取高精度的位姿估计结果。
##### 实现了什么改变世界的成果
&emsp;&emsp;该方法可以达到最先进的离线批处理方法水平的准确性。


## **介绍**
##### 为什么做这个成果
&emsp;&emsp;构建3D地图很火，用激光很常见，距离误差小。建图时点云配准就很重要，所以要获取准确的雷达位姿。有用gps的，有用视觉里程计的，有用轮速计的，但是都有大的误差和漂移。
##### 其他人做了什么 and 哪里不行
&emsp;&emsp;
##### 提出了一个idea
&emsp;&emsp;提出一种不需要惯导就能获取低漂移位姿的方法。通过提取scan的边缘角点和平面点，进行点和线以及点和面之间的匹配，获取高频低精度的位姿。然后组合scan为一个sweep，也是提取线面特征点去匹配，但是这次点更多，所以精度也就更高。odometry和mapping都是采用的icp算法。


## **工作和实验**
##### 坑点1
&emsp;&emsp;远古年代的论文，加上作者大概是穷或者那个时候还没有多线激光雷达。所以他是用单线雷达加上一个舵机，来模拟的多线雷达，就很坑。论文中的scan指的是单线扫一圈获取的数据，而sweep是40个scan组成的。因为他模拟的40线雷达。这里一定要注意。
##### 坑点2
&emsp;&emsp;基于上述的坑点，他的补畸变是针对每个scan，用估计的最新的scan下雷达的位姿，插值获取的位姿来进行重投影，投影到本次sweep开始时雷达的坐标系下。mapping的匹配也是针对40个scan，用最后的scan位姿来插值，然后做icp。等估计位姿后，就把本次sweep的所以scan重投影到最后的位姿
##### 特征提取
提取线特征和面特征，根据点和相邻点之间的欧式距离累计，计算平滑度。该计算只找在同一个scan的相邻点。然后挑选平滑度大的，说明不够平滑，作为角点。平滑度小的作为平面点。可以看到这一块的话特征提取在多线的情况下，是提取水平方向的点，并没有提取垂直方向的点，所以在匹配的时候用点去匹配线和面的最小距离，**这样匹配出的是水平方向的运动，而高度方面并没有很好的匹配，所以高程误差非常大**。
##### 特征点的提取要求
&emsp;&emsp;1.为了均匀提取整个sweep的特征点，划分四个区域，每个区域提取平滑度最大和最小的n个点作为特征点。同样，为了均匀提取，被提取点周围一定区域内的点也不再被提取。  
&emsp;&emsp;2.避免提取和激光束水平的点。  
&emsp;&emsp;3.避免提取被遮挡物的特征，如遮挡线附近提取出的A和B，A在被遮挡物上，B在遮挡物上，距离雷达更近，就要去掉A，保留B。
##### 点和线面之间的匹配
&emsp;&emsp;提取出的点，经过变换，理论上应该和上一个sweep上的点重合，这一步通过KD树查找最近点来默认为匹配点。线特征提取周围的两个来自不同scan的点表示直线。然后计算点和直线之间的欧式距离。面特征提取周围来自2个scan的三个点表示面，然后计算点和面的欧式距离。通过最小二乘，优化这些点的欧式距离，获取一个位姿使得点和对应线和面的欧式距离最小。  
&emsp;&emsp;因为scan之间的匹配特征点较少，所以配准不算很精确，输出值为一个大致的值。而mapping时是用sweep来匹配的，点更多，所以位姿估计更准。
&emsp;&emsp;因为icp需要初值。本论文的初值是在假设雷达匀速运动的情况下，用上一时刻的运动作为初值的。而且做了两次icp初值匹配，第一次的初值是用上一次的运动估计作为初值。第二次匹配是用第一次匹配的估计值结果更加准确，收敛速度也更快。
##### mapping部分
&emsp;&emsp;因为没有闭环，所以比较简单，主要是sweep和局部map匹配这种情况。
第一种是200米内的地图作为局部地图，第二种是挑选n个关键帧的组合为一个关键地图，
## **结论**
&emsp;&emsp;通过特征点提取和两步匹配算法，实现一个实时的低漂移slam系统。未来的方向是加上闭环。


## 总结
loam创造性的提出了一个经典的3d雷达算法，利用了稀疏特征点提高了匹配速度。但是因为平滑度计算是用了水平的相邻点算的，所以高程误差很大。而且是远古年代的论文，作者后面改的也没再发论文，所以参考一下就可以了。而且没有回环，很容易跑飞。但是loam很经典，他的一些思路是值得学习的，后面港科大重写了A-loam，简化了loam的代码，是很好的入门学习材料。